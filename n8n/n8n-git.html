<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏™‡∏£‡∏∏‡∏õ: n8n Git Sync (Push & Pull) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Self-Hosted</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 { color: #2c3e50; text-align: center; margin-bottom: 20px; }
        .container {
            display: flex;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
            height: 80vh; /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• */
        }
        .column {
            flex: 1;
            padding: 15px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            overflow-y: auto; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå Scroll ‡πÑ‡∏î‡πâ‡∏≠‡∏¥‡∏™‡∏£‡∏∞ */
        }
        h2 { color: #e67e22; border-bottom: 2px solid #eee; padding-bottom: 5px; }
        h3 { color: #34495e; margin-top: 15px; }
        code, pre {
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            padding: 8px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 0.9em;
            display: block;
            white-space: pre-wrap;
        }
        .warning { color: #c0392b; font-weight: bold; }
    </style>
</head>
<body>

    <h1>‡∏™‡∏£‡∏∏‡∏õ: n8n DIY Git Sync (Push & Pull)</h1>
    <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡πÉ‡∏ô n8n Free Plan ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ GitHub ‡πÄ‡∏õ‡πá‡∏ô‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö Workflow</p>

    <div class="container">
        <div class="column">
            <h2>üì§ ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà 1: PUSH (‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô GitHub)</h2>
            <p>‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ Workflow ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö User 1 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á Workflow ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå JSON ‡∏Ç‡∏∂‡πâ‡∏ô GitHub</p>

            <h3>‚öôÔ∏è 1. ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Node</h3>
            <p><code>Manual Trigger (‡∏´‡∏£‡∏∑‡∏≠ Schedule)</code> ‚Üí <code>n8n Node (Get Many)</code> ‚Üí <code>Code in JavaScript (Stringify)</code> ‚Üí <code>GitHub (Create/Update File)</code></p>
            
            <h3>‚úçÔ∏è 2. Code ‡πÉ‡∏ô JavaScript (Node Stringify)</h3>
            <p>‡πÅ‡∏õ‡∏•‡∏á Array ‡∏Ç‡∏≠‡∏á Workflows ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô String ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå:</p>
            <pre>
// ‡∏î‡∏∂‡∏á Workflow JSON ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å Node ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
const workflowArray = $input.item.json; 

// ‡πÅ‡∏õ‡∏•‡∏á Array ‡πÄ‡∏õ‡πá‡∏ô String JSON ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°
const fileContent = JSON.stringify(workflowArray, null, 2);

return {
    json: {
        fileContent: fileContent,
        fileName: `workflows-backup.json`
    }
};</pre>
            
            <h3>üîó 3. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ GitHub Node</h3>
            <ul>
                <li><strong>Resource:</strong> <code>File</code></li>
                <li><strong>Operation:</strong> <code>Create or Update</code></li>
                <li><strong>File Path:</strong> <code>workflows.json</code></li>
                <li><strong>File Content:</strong> <code>{{ $json.fileContent }}</code></li>
                <li><span class="warning">***‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡∏ß‡πà‡∏≤ Token ‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå "Contents: Read and write"***</span></li>
            </ul>
        </div>

        <div class="column">
            <h2>‚¨áÔ∏è ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà 2: PULL (‡∏î‡∏∂‡∏á‡∏°‡∏≤‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï)</h2>
            <p>‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ Workflow ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö User 2 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡πÑ‡∏ü‡∏•‡πå Backup ‡∏à‡∏≤‡∏Å GitHub ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô n8n ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</p>

            <h3>‚öôÔ∏è 1. ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Node</h3>
            <p><code>Manual Trigger</code> ‚Üí <code>GitHub (Get File)</code> ‚Üí <code>Code in JavaScript (Decode & Parse)</code> ‚Üí <code>Split Out</code> ‚Üí <code>n8n Node (Update Workflow)</code></p>
            
            <h3>‚úçÔ∏è 2. Code ‡πÉ‡∏ô JavaScript (Decode & Parse)</h3>
            <p>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Error Base64 ‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ:</p>
            <pre>
// 1. ‡∏î‡∏∂‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™ Base64
const contentBase64 = $input.item.json.content; 

// 2. ‡πÅ‡∏õ‡∏•‡∏á Base64 ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô String JSON
const jsonString = Buffer.from(contentBase64, 'base64').toString('utf8');

// 3. Parse JSON String ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô Array (‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÉ‡∏´‡πâ Node Split Out)
const workflowArray = JSON.parse(jsonString);

return {
    json: {
        // ‡∏ä‡∏∑‡πà‡∏≠ Field ‡∏ó‡∏µ‡πà Node Split Out ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ
        workflowsArray: workflowArray 
    }
};</pre>

            <h3>üîó 3. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Node Split Out</h3>
            <ul>
                <li><strong>Node:</strong> <code>Split Out</code></li>
                <li><strong>Fields To Split Out:</strong> <code>workflowsArray</code> (‡πÉ‡∏™‡πà‡πÅ‡∏Ñ‡πà‡∏ä‡∏∑‡πà‡∏≠ Field ‡∏ï‡∏£‡∏á‡πÜ)</li>
            </ul>

            <h3>üîÑ 4. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Node n8n (Update)</h3>
            <p>Node ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ã‡πâ‡∏≥‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Workflow ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏°‡∏≤:</p>
            <ul>
                <li><strong>Resource:</strong> <code>Workflow</code></li>
                <li><strong>Operation:</strong> <code>Update</code></li>
                <li><strong>ID:</strong> <code>{{ $json.id }}</code></li>
                <li><strong>Workflow Data:</strong> <code>{{ JSON.stringify($json) }}</code></li>
                <li><strong>Activate Workflow:</strong> <code>{{ $json.active }}</code> (‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà User 1 ‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ)</li>
            </ul>
        </div>
    </div>

</body>
</html>
